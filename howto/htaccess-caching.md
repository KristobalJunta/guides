# Настройка кэширования через файл .htaccess

В данной статье рассмотрена настройка кеширования статических файлов через **.htaccess**, что позволит быстрее загружать сайт.

Ускорить загрузку Вашего сайта можно с помощью кэширования. Для решения этой задачи Вы можете воспользоваться модулем headers веб-сервера Apache. Он позволяет контролировать и изменять заголовки HTTP-запросов и HTTP-ответов. Вся суть в этом случае сводится к тому, что бы заставить браузер загрузить редко-изменяемые данные с сервера в локальный кэш всего один раз, а далее, при заходе на сайт, использовать данные из кэша. Можно установить кэширование для определенных типов файлов на строго определенное время, по истечению которого файлы будут загружены с сервера вновь. Делается это достаточно просто:

```
<FilesMatch ".(flv|gif|jpg|jpeg|png|ico|swf|js|css|pdf)$">
  Header set Cache-Control "max-age=2592000"
</FilesMatch>
```

Для файлов с указанными расширениями в конструкции `FilesMatch` устанавливается отдаваемый сервером заголовок `Cache-Control` и переменная `max-age`, в которой указывается время сохранения файлов в кеше в секундах. Добавьте или удалите расширения файлов, которые для Вас будут уместны в данном случае.

Если какие-то файлы нет необходимости кэшировать, то просто не включайте их в список. Можно также запретить принудительно кэширование файлов, чаще всего отключают кэширование для динамических файлов, например различных сценариев. Добавьте ниже приведенный код в Ваш файл **.htaccess**, что бы отключить кэширование для скриптов, предварительно внеся актуальные изменения соответственно Вашему случаю:

```
<FilesMatch ".(pl|php|cgi|spl|scgi|fcgi)$">
  Header unset Cache-Control
</FilesMatch>
```

Как видно, здесь указаны расширения файлов, которые не требуется кэшировать, просто укажите требуемые типы файлов.

Еще одни способ управлять кэшированием - это воспользоваться модулем **expires**. Этот модуль контролирует установку HTTP-заголовков для кэширования данных на стороне браузера. Продолжительность хранения данных в кэше может быть установлена по времени, по последнему изменению файла или по времени доступа клиента.

Ниже представлен простой пример использования модуля expires в файле **.htaccess**:

```
<IfModule mod_expires.c>
  ExpiresActive On
  ExpiresDefault "access plus 1 month"

  ExpiresByType image/gif "access plus 2 months"
  ExpiresByType image/jpeg "access plus 2 months"
</IfModule>
```

В этом примере мы включаем модуль, устанавливаем кэширование по умолчанию на 1 месяц, а далее назначаем для файлов с расширением `gif` и `jpg` время хранения в кэше `plus 2 months`. Время можно указать в годах, месяцах, неделях, днях, часах, минутах, секундах. В том числе можно использовать вариант вида:

```
ExpiresByType text/html "access plus 1 month 15 days 2 hours"
ExpiresByType image/gif "modification plus 5 hours 3 minutes"
```

В качестве типов файлов можно указывать различные `MIME types`, вот некоторые из них в качестве примера:

```
image/x-icon
image/jpeg
image/png image/gif
application/x-shockwave-flash
text/css
text/javascript
application/javascript
application/x-javascript
text/html
application/xhtml+xml
```

Полный текст: [Netangels.ru](https://www.netangels.ru/support/hosting-howto/htaccess-cache/)
